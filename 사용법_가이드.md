# 알림 시스템 사용법 가이드

이제 데이터베이스에 저장되고 사용자가 직접 알림을 작성해서 보낼 수 있는 완전한 웹 인터페이스가 준비되었습니다!

## 🚀 빠른 시작

### 1. 서버 실행
```bash
test_local.bat
```

### 2. 웹 브라우저에서 접속
- 메인 페이지: `http://localhost:8080/`
- 알림 작성: `http://localhost:8080/notifications/create`
- 알림 목록: `http://localhost:8080/notifications/list`

## 📝 알림 작성하기

### 1. 알림 작성 페이지 접속
- 메인 페이지에서 "알림 작성" 클릭
- 또는 직접 `http://localhost:8080/notifications/create` 접속

### 2. 수신자 선택
- **모든 사용자에게 전송**: 활성 사용자 모두에게 알림 전송
- **특정 사용자에게 전송**: 드롭다운에서 사용자 선택
  - admin (admin@example.com)
  - user1 (user1@example.com)
  - user2 (user2@example.com)
  - user3 (user3@example.com)
  - manager (manager@example.com)

### 3. 알림 내용 작성
- **제목**: 알림의 제목 (최대 100자)
- **메시지**: 알림 내용 (최대 500자)
- **알림 타입**:
  - **정보 (INFO)**: 일반적인 정보나 공지사항
  - **경고 (WARNING)**: 주의가 필요한 사항
  - **오류 (ERROR)**: 중요한 오류나 긴급 상황

### 4. 미리보기 확인
- 오른쪽 패널에서 실시간으로 알림이 어떻게 보일지 확인
- 알림 타입별 설명도 함께 표시

### 5. 알림 전송
- "알림 전송" 버튼 클릭
- 전송 완료 후 알림 목록 페이지로 이동

## 📋 알림 목록 관리

### 1. 알림 목록 확인
- `http://localhost:8080/notifications/list` 접속
- 전송된 모든 알림을 시간순으로 확인

### 2. 필터링
- **전체**: 모든 알림 표시
- **대기 중**: 전송 대기 중인 알림
- **전송 완료**: 성공적으로 전송된 알림
- **전송 실패**: 전송에 실패한 알림

### 3. 알림 관리
- **재전송**: 실패한 알림 재전송 (재전송 버튼)
- **삭제**: 불필요한 알림 삭제 (삭제 버튼)

## 🗄️ 데이터베이스 확인

### H2 콘솔 접속
- `http://localhost:8080/h2-console` 접속
- 설정 정보:
  - JDBC URL: `jdbc:h2:mem:testdb`
  - 사용자명: `sa`
  - 비밀번호: (비어있음)

### 테이블 확인
- **USERS**: 사용자 정보
- **NOTIFICATIONS**: 알림 데이터

## 📊 시스템 구조

### 데이터베이스 (H2)
- **메모리 기반**: 서버 재시작 시 데이터 초기화
- **자동 테이블 생성**: JPA가 자동으로 테이블 생성
- **테스트 데이터**: 서버 시작 시 5명의 테스트 사용자 자동 생성

### 알림 상태
- **PENDING**: 전송 대기 중
- **SENT**: 전송 완료
- **FAILED**: 전송 실패

### 알림 타입
- **INFO**: 정보 (파란색)
- **WARNING**: 경고 (노란색)
- **ERROR**: 오류 (빨간색)

## 🔧 API 사용법

### REST API 엔드포인트
- `GET /api/test/health` - 서버 상태 확인
- `GET /api/test/info` - 서버 정보
- `POST /api/notifications/send/user/{userId}` - 특정 사용자에게 알림
- `POST /api/notifications/send/all` - 모든 사용자에게 알림
- `GET /api/notifications/user/{userId}` - 사용자별 알림 조회

### API 테스트
- `http://localhost:8080/test` 페이지에서 API 직접 테스트 가능

## 💡 사용 예시

### 1. 공지사항 전송
```
제목: 시스템 점검 안내
메시지: 2024년 1월 15일 오전 2시부터 4시까지 시스템 점검이 예정되어 있습니다.
타입: INFO
수신자: 모든 사용자
```

### 2. 긴급 알림
```
제목: 보안 업데이트 필요
메시지: 보안 취약점이 발견되어 즉시 패스워드를 변경해주세요.
타입: WARNING
수신자: admin
```

### 3. 오류 알림
```
제목: 데이터베이스 연결 오류
메시지: 데이터베이스 연결에 문제가 발생했습니다. 관리자에게 문의하세요.
타입: ERROR
수신자: manager
```

## 🛠️ 문제 해결

### 1. 서버 시작 실패
- Java 17 이상 설치 확인
- 포트 8080 사용 중인지 확인
- 로그 확인: `gradlew.bat bootRun --args='--spring.profiles.active=test'`

### 2. 데이터베이스 연결 오류
- H2 콘솔에서 연결 확인
- 테이블이 생성되었는지 확인

### 3. 알림 전송 실패
- Kafka 연결 상태 확인 (현재는 시뮬레이션)
- 로그에서 오류 메시지 확인

## 📈 다음 단계

현재 시스템은 기본적인 알림 작성 및 관리 기능을 제공합니다. 추가로 구현할 수 있는 기능들:

1. **실제 이메일/SMS 전송**: SMTP, SMS API 연동
2. **실시간 알림**: WebSocket을 통한 실시간 알림
3. **사용자 관리**: 사용자 등록, 수정, 삭제
4. **알림 템플릿**: 미리 정의된 알림 템플릿
5. **통계 대시보드**: 알림 전송 통계 및 분석

---

**즐거운 알림 시스템 사용하세요!** 🎉 